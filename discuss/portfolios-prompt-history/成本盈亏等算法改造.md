## 成本/盈亏 算法改造
系统目前使用的成本和盈亏计算算法是@docs/雪球计算公式.md，现在算法要改成@docs/计算公式.md。
主要变动如下
1、持股数 和 当日盈亏 算法不变
2、成本算法 原来有 摊薄成本 和 持仓成本 两种 现修改成 只有一种成本价算法
3、盈亏算法 原来有 浮动盈亏 和 累计盈亏 两种 现修改成 只有一种盈亏算法

## 涉及的相关改动
### 表结构
### @src/lib/db/schema.ts holdings表
1、去掉dilutedCost，保留holdCost用新的算法实现计算
2、otherTax 改成 otherFee， 表示其他费用如过户费

### 算法相关
@src/lib/services/financial-calculator.ts 
@src/lib/services/fee-calculator.ts
@src/lib/services/portfolio-calculator.ts
三个文件中，涉及成本和盈亏的算法要改成新的算法，原来的不需要考虑兼容性，可以删掉，相应的类型定义，service也要做对应修改。

### UI相关
@src/app/(main)/investment/portfolios/_components/holdings-data-table.tsx 持仓表格中表头改成如下所示表头
名称/代码 涨跌 市值/持仓 现价/成本 当日盈亏（上面盈亏额，下面盈亏比） 盈亏（上面盈亏额，下面盈亏比） 操作
相应的数据获取也要做同步修改。